!function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=5)}([function(t,n,r){var e=r(7);t.exports=function(){var t=arguments;return function(){for(var n=t[0].apply(this,arguments),r=1,e=t.length;r<e;r+=1)n=t[r](n);return n}},e.extend(t.exports,e),e.extend(t.exports,r(8)),e.extend(t.exports,r(9))},function(t,n){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var e=new Uint8Array(16);t.exports=function(){return r(e),e}}else{var o=new Array(16);t.exports=function(){for(var t,n=0;n<16;n++)0==(3&n)&&(t=4294967296*Math.random()),o[n]=t>>>((3&n)<<3)&255;return o}}},function(t,n){for(var r=[],e=0;e<256;++e)r[e]=(e+256).toString(16).substr(1);t.exports=function(t,n){var e=n||0,o=r;return[o[t[e++]],o[t[e++]],o[t[e++]],o[t[e++]],"-",o[t[e++]],o[t[e++]],"-",o[t[e++]],o[t[e++]],"-",o[t[e++]],o[t[e++]],"-",o[t[e++]],o[t[e++]],o[t[e++]],o[t[e++]],o[t[e++]],o[t[e++]]].join("")}},function(t,n,r){var e=r(6),o=r(0);const i=1,u=2;function a(t,n,r){if(!(this instanceof a))return new a(t,n,r);this.s=t,this.r=n,this.m=r}a.prototype.toString=function(){return(this.s===i?"WB":"LB")+" R"+this.r+" M"+this.m};var s=function(){return[e.NONE,e.NONE]},c=function(t,n){return t.map(function(t){return t>n?-1:t})},f=function(t,n,r){return new a(t,n,r)},l=function(t,n){var r=function(t,n){var r=Math.floor(Math.log(t)/Math.log(2)),e=t-Math.pow(2,r);if(0===e)return Math.pow(2,n-r);var o=(t-2*e).toString(2).split("").reverse().join("");return(parseInt(o,2)<<n-o.length)+Math.pow(2,n-r-1)}(t,n);return[Math.pow(2,n)+1-r,r]},p=function(t,n,r){return t===u?function(t,n){var r=2*t-n,e=Math.floor(r/2)-1;if(e<0)throw new Error("lbPos model works for k>=0 only");var o=Math.pow(2,e)*(r%2);return Math.pow(2,e+1)+1+o}(n,r):function(t,n){return Math.pow(2,t-n)+1}(n,r)},h=e.sub("Duel",function(t,n){this.isLong=t.isLong,this.last=t.last,this.limit=t.limit,this.downMix=t.downMix,this.p=Math.ceil(Math.log(this.numPlayers)/Math.log(2)),n(function(t,n,r,o){for(var a,p,h=[],d=1;d<=Math.pow(2,n-1);d+=1)h.push({id:f(i,1,d),p:c(l(d,n),t)});for(a=2;a<=n;a+=1)for(p=1;p<=Math.pow(2,n-a);p+=1)h.push({id:f(i,a,p),p:s()});if(r>=u){for(a=1;a<=2*n-2;a+=1)for(p=1;p<=Math.pow(2,n-1-Math.floor((a+1)/2));p+=1)h.push({id:f(u,a,p),p:s()});h.push({id:f(u,2*n-1,1),p:s()})}return o&&h.push({id:f(u,r===u?2*n:1,1),p:s()}),h.sort(e.compareMatches)}(this.numPlayers,this.p,this.last,this.isLong));var r=function(t,n){var r=n.p.indexOf(-1);r>=0&&(n.m=0===r?[0,1]:[1,0],t(n))}.bind(null,this._progress.bind(this));this.findMatches({s:i,r:1}).forEach(r),this.last>i&&this.findMatches({s:u,r:1}).forEach(r)});h.configure({defaults:function(t,n){return n.isLong=!n.short,n.last=n.last||i,n.limit=0|n.limit,n.downMix=Boolean(n.downMix&&n.last>i),n},invalid:function(t,n){return t<4||t>1024?"numPlayers must be >= 4 and <= 1024":[i,u].indexOf(n.last)<0?"last elimination bracket must be either WB or LB":n.limit?"limits not yet supported":null}});var d={WB:i,LB:u,WO:-1};Object.keys(d).forEach(function(t){Object.defineProperty(h,t,{enumerable:!0,value:d[t]})}),h.attachNames=function(t){h.prototype.roundName=function(n){return t(d,this.last,this.p,n)}},h.prototype._progress=function(t){var n=function(t,n){if(t){var r=t[0],e=t[1],o=this.findMatch(r);if(!o)throw new Error("tournament corrupt: "+r+" not found!");if(o.p[e]=n,-1===o.p[(e+1)%2])return o.m=e?[0,1]:[1,0],o.id}}.bind(this),r=t.m[0]>t.m[1]?t.p[0]:t.p[1],e=t.m[0]>t.m[1]?t.p[1]:t.p[0];t.id.s===u&&t.id.r===2*this.p-1&&this.isLong&&r===t.p[0]&&(r=e=0),n(this.right(t.id),r);var o=n(this.down(t.id),e);o&&n(this.right(o),e)},h.prototype._verify=function(t,n){return-1===t.p[0]||-1===t.p[1]?"cannot override score in walkover'd match":n[0]===n[1]?"cannot draw a duel":null},h.prototype._safe=function(t){var n=this.right(t.id),r=this.down(t.id),e=n&&this.findMatch(n[0]),o=r&&this.findMatch(r[0]),i=o&&this.right(o.id);return[e,o,i&&this.findMatch(i[0])].every(function(t){return!t||!t.m||-1===t.p[0]||-1===t.p[1]})},h.prototype._early=function(){var t=this.matches[this.matches.length-2];return this.isLong&&this.last===u&&t.m&&t.m[0]>t.m[1]},h.prototype._stats=function(t,n){var r=this.isLong,a=this.last,s=this.p,c=r&&a===i&&n.id.s===u,f=a===i&&n.id.s===i&&n.id.r===s,l=a===u&&n.id.s===u&&n.id.r>=2*s-1,h=r&&a===i&&n.id.s===i&&n.id.r===s-1,d=!(c||f||l||h),m=n.id.s<a?this.down(n.id,!1)[0].r:n.id.r;if(n.p.filter(o.gt(0)).forEach(function(n){e.resultEntry(t,n).pos=d?p(a,s,m):2+2*Number(c||h)}),n.p.indexOf(-1)<0&&n.m){var v=e.resultEntry(t,n.p[0]),y=e.resultEntry(t,n.p[1]),g=n.m[0]>n.m[1]?v:y;g.wins+=1,v.for+=n.m[0],y.for+=n.m[1],v.against+=n.m[1],y.against+=n.m[0];var M=v.seed===g.seed,w=l&&(n.id.r===2*s||!r||M);(c||f||w)&&(g.pos-=1)}return t},h.prototype.down=function(t){var n=t.s,r=t.r,e=t.m,a=this.p;if(n>=this.last)return n===i&&this.isLong&&r===a-1?[f(u,1,1),(e+1)%2]:n===u&&r===2*a-1&&this.isLong?[f(u,2*a,1),1]:null;if(1===r)return[f(u,1,Math.floor((e+1)/2)),e%2];if(this.downMix)return[f(u,2*(r-1),function(t,n,r){var e=Math.pow(2,t-n),i=Math.floor(Math.pow(2,t-n-1)),u=o.odd(Math.floor(n/2));return o.even(Math.floor((n+1)/2))?u?r>i?e-r+i+1:i-r+1:r>i?r-i:r+i:u?e-r+1:r}(a,r,e)),0];var s=r>2||o.odd(e)?0:1;return[f(u,2*(r-1),e),s]},h.prototype.right=function(t){var n=t.s,r=t.r,e=t.m,a=this.p,s=this.last===i&&r===a,c=this.last===u&&n===u&&r===2*a,l=this.last===i&&n===u,p=n===u&&r===2*a-1&&!this.isLong;if(s||c||l||p)return null;if(this.last>=u&&n===i&&r===a)return[f(u,2*a-1,1),0];var h,d=n===u&&o.odd(r)?e:Math.floor((e+1)/2);return h=n===i?(e+1)%2:r>=2*a-2?(r+1)%2:1===r?this.downMix?1:e%2:o.odd(r)?1:(e+1)%2,[f(n,r+1,d),h]},h.Id=a,t.exports=h},function(t,n,r){var e=r(11),o=r(12),i=o;i.v1=e,i.v4=o,t.exports=i},function(t,n,r){"use strict";r.r(n);var e=r(3),o=r.n(e),i=r(4),u=r.n(i);let a;const s=Elm.Main.init({node:document.getElementById("elm-root")});s.ports.create.subscribe(t=>{(a=new o.a(t)).matches.forEach(t=>{t.elmId=u.a.v4()}),c()}),s.ports.score.subscribe(({winnerId:t,matchId:n})=>{const r=a.matches.find(t=>t.elmId==n),e=r.p[0]==t?[1,0]:[0,1];a.score(r.id,e),c()});const c=()=>s.ports.onMatchupsUpdated.send(a.matches.filter(t=>1==t.id.s).filter(t=>t.p.every(t=>-1!=t)).filter(t=>t.p.every(t=>0!=t)).map(f)),f=t=>({id:t.elmId,playerOne:t.p[0]||null,playerTwo:t.p[1]||null,round:t.id.r,winner:t.m?t.m[0]>t.m[1]?t.p[0]:t.p[1]:null})},function(t,n,r){var e=r(0),o=r(10);function i(t,n){this.matches=n,this.state=[]}Object.defineProperty(i,"NONE",{enumerable:!0,value:o.NONE}),Object.defineProperty(i,"helpers",{value:o});i.from=function(t,n,r,e){var i="Cannot forward from "+n.name+": ";if(!n.isDone())throw new Error(i+"tournament not done");var u=n.results();if(u.length<r)throw new Error(i+"not enough players");if(u.filter(function(t){return t.pos<=r}).length>r)throw new Error(i+"too many players tied to pick out top "+r);var a=new t(r,e);return function(t,n){if(o.started(t.matches))throw new Error("Cannot replace players for a tournament in progress");t.matches.forEach(function(t){t.p=t.p.map(function(t){return t>0?n[t-1].seed:t})})}(a,u),a},i.resultEntry=function(t,n){for(var r=0;r<t.length;r+=1)if(t[r].seed===n)return t[r];throw new Error("No result found for seed "+n+" in result array:"+t)};var u=function(t){return t+""=="[object Object]"?"S"+t.s+" R"+t.r+" M"+t.m:t+""};i.isInteger=function(t){return Math.ceil(t)===t},i.sub=function(t,n,r){var e=r||i,o=function(r,i){if(!(this instanceof o))return new o(r,i);if(!o.invalid)throw new Error(t+" must implement an Invalid function");Object.defineProperty(this,"_opts",{configurable:!0,value:(o.defaults?o:e).defaults(r,i)});var u=o.invalid(r,this._opts);if(null!==u)throw this._opts.log.error("Invalid %d player %s with opts=%j rejected",r,t,this._opts),new Error("Cannot construct "+t+": "+u);this.numPlayers=r,this.name=t,n.call(this,this._opts,e.bind(this,r))};return e.inherit(o,e),o},i.invalid=e.constant(null),i.defaults=function(t,n){var r=e.extend({},n||{});return r.log=n&&n.log?n.log:console,r},i.configure=function(t,n,r){var e=r||i;n.defaults?t.defaults=function(t,r){return n.defaults(t,e.defaults(t,r))}:t.defaults=e.defaults,n.invalid?t.invalid=function(r,e){if(!i.isInteger(r))return"numPlayers must be a finite integer";var o=n.invalid(r,t.defaults(r,e));return null!==o?o:null}:t.invalid=e.invalid},i.inherit=function(t,n){var r=n||i;t.prototype=Object.create(r.prototype);var o={_verify:null,_progress:void 0,_early:!1,_safe:!1,_initResult:{}};Object.keys(o).forEach(function(n){t.prototype[n]=r.prototype[n]||e.constant(o[n])}),t.from=function(n,r,e){return i.from(t,n,r,e)},t.restore=function(n,r,e,o){var i=new t(n,r);return e.forEach(function(t){"score"===t.type&&i.score(t.id,t.score)}),(o||[]).forEach(function(t){i.findMatch(t.id).data=t.data}),i},t.configure=function(n){return i.configure(t,n,r)},t.sub=function(n,e){return r.sub(n,e,t)},t.inherit=function(n){return r.inherit(n,t)}},i.compareMatches=function(t,n){return t.id.s-n.id.s||t.id.r-n.id.r||t.id.m-n.id.m},i.compareRes=function(t,n){return t.pos-n.pos||t.seed-n.seed},i.compareZip=function(t,n){return n[1]-t[1]||t[0]-n[0]},i.sorted=function(t){return e.zip(t.p,t.m).sort(i.compareZip).map(e.get("0"))},i.resTieCompute=function(t,n,r,e){for(var o=n,i=0,u=-1/0,a=0;a<t.length;a+=1){var s=t[a],c=e(s);c===u?i+=1:(o+=i+1,i=0),u=c,r(s,o)}},i.matchTieCompute=function(t,n,r){for(var e=n,o=0,i=-1/0,u=0;u<t.length;u+=1){var a=t[u],s=a[0],c=a[1];i===c?o+=1:(e+=1+o,o=0),i=c,r(s,e)}},i.prototype.isDone=function(){return this.matches.every(e.get("m"))||this._early()},i.prototype.unscorable=function(t,n,r){var e=this.findMatch(t);return e?this.isPlayable(e)?Array.isArray(n)&&n.every(Number.isFinite)?n.length!==e.p.length?u(t)+" scores must have length "+e.p.length:r||!Array.isArray(e.m)||this._safe(e)?this._verify(e,n):u(t)+" cannot be re-scored":u(t)+" scores must be a numeric array":u(t)+" not ready - missing players":u(t)+" not found in tournament"},i.prototype.score=function(t,n){var r=this.unscorable(t,n,!0);if(null!==r)return this._opts.log.error("failed scoring match %s with %j",u(t),n),this._opts.log.error("reason:",r),!1;var e=this.findMatch(t);return e.m=n,this.state.push({type:"score",id:t,score:n}),this._progress(e),!0},i.prototype.results=function(){var t=this.players();if(this.numPlayers!==t.length){var n=t.length+" !== "+this.numPlayers;throw new Error(this.name+" initialized numPlayers incorrectly: "+n)}for(var r=new Array(this.numPlayers),o=0;o<this.numPlayers;o+=1)r[o]={seed:t[o],wins:0,for:0,against:0,pos:this.numPlayers},e.extend(r[o],this._initResult(t[o]));return this._stats instanceof Function&&this.matches.reduce(this._stats.bind(this),r),this._sort instanceof Function?this._sort(r):r.sort(i.compareRes)},i.prototype.resultsFor=function(t){return e.firstBy(function(n){return n.seed===t},this.results())},i.prototype.upcoming=function(t){return o.upcoming(this.matches,t)},i.prototype.isPlayable=o.playable,i.prototype.findMatch=function(t){return o.findMatch(this.matches,t)},i.prototype.findMatches=function(t){return o.findMatches(this.matches,t)},i.prototype.findMatchesRanged=function(t,n){return o.findMatchesRanged(this.matches,t,n)},i.prototype.metadata=function(){return o.metadata(this.matches)},i.prototype.rounds=function(t){return o.partitionMatches(this.matches,"r","s",t)},i.prototype.sections=function(t){return o.partitionMatches(this.matches,"s","r",t)};var a=function(t){return t.some(function(t){return!t.m})};i.prototype.currentRound=function(t){return e.firstBy(a,this.rounds(t))},i.prototype.nextRound=function(t){for(var n=this.rounds(t),r=0;r<n.length;r+=1)if(a(n[r]))return n[r+1]},i.prototype.matchesFor=function(t){return o.matchesForPlayer(this.matches,t)},i.prototype.players=function(t){return o.players(this.findMatches(t||{}))},t.exports=i},function(t,n){var r=Array.prototype.slice,e=function(){var t=arguments;return function(){for(var n=t[0].apply(this,arguments),r=1,e=t.length;r<e;r+=1)n=t[r](n);return n}},o=e;o.seq=e,o.id=function(t){return t},o.noop=function(){},o.copy=function(t){return Array.isArray(t)?t.slice():t===Object(t)?o.extend({},t):t},o.constant=function(t){return function(){return o.copy(t)}},o.not=function(t){return function(n){return!t(n)}},o.all=function(t){return function(n){return n.every(t)}},o.any=function(t){return function(n){return n.some(t)}},o.none=function(t){return function(n){return!n.some(t)}},o.elem=function(t){return function(n){return t.indexOf(n)>=0}},o.notElem=function(t){return function(n){return t.indexOf(n)<0}},o.extend=function(t,n){for(var r=Object.keys(n),e=0;e<r.length;e+=1){var o=r[e];t[o]=n[o]}return t},o.gcd=function(t,n){for(t=Math.abs(t),n=Math.abs(n);n;){var r=n;n=t%n,t=r}return t},o.lcm=function(t,n){return t&&n?Math.abs(t*n/o.gcd(t,n)):0},o.even=function(t){return t%2==0},o.odd=function(t){return t%2==1},o.get=function(){var t=arguments;return function(n){for(var r=n,e=0;e<t.length&&void 0!==r;e+=1)r=r[t[e]];return r}},o.pluck=function(t,n){for(var r=[],e=0,o=n.length;e<o;e+=1)r[e]=n[e][t];return r},o.first=function(t){return t[0]},o.last=function(t){return t[t.length-1]},o.firstBy=function(t,n){for(var r=0,e=n.length;r<e;r+=1)if(t(n[r]))return n[r]},o.lastBy=function(t,n){for(var r=n.length-1;r>=0;r-=1)if(t(n[r]))return n[r]},o.range=function(t,n,r){arguments.length<=1&&(n=t,t=1),r=arguments[2]||1;for(var e=Math.max(Math.ceil((n-t+1)/r),0),o=new Array(e),i=0;i<e;i+=1,t+=r)o[i]=t;return o},o.replicate=function(t,n){for(var r=[],e=0;e<t;e+=1)r.push(o.copy(n));return r},o.zipWith=function(){for(var t=arguments[0],n=r.call(arguments,1),e=n.length,i=[],u=Math.min.apply(Math,o.pluck("length",n)),a=0;a<u;a+=1){for(var s=[],c=0;c<e;c+=1)s.push(n[c][a]);i.push(t.apply(this,s))}return i},o.zip=function(){for(var t=arguments.length,n=[],r=Math.min.apply(Math,o.pluck("length",arguments)),e=0;e<r;e+=1){for(var i=[],u=0;u<t;u+=1)i.push(arguments[u][e]);n.push(i)}return n},o.iterate=function(t,n,r){for(var e=[n],o=1;o<t;o+=1)e.push(r(e[o-1]));return e},o.scan=function(t,n,r){for(var e=[n],o=0,i=t.length;o<i;o+=1)e.push(r(e[o],t[o]));return e},o.reduce=function(t,n){return function(r){return r.reduce(t,n)}},o.map=function(t){return function(n){return n.map(t)}},o.filter=function(t){return function(n){return n.filter(t)}},o.invoke=function(t){var n=r.call(arguments,1);return function(r){return r[t].apply(r,n)}},t.exports=o},function(t,n){var r={},e=Array.prototype.concat;r.plus2=function(t,n){return t+n},r.plus3=function(t,n,r){return t+n+r},r.plus4=function(t,n,r,e){return t+n+r+e},r.times2=function(t,n){return t*n},r.times3=function(t,n,r){return t*n*r},r.times4=function(t,n,r,e){return t*n*r*e},r.and2=function(t,n){return t&&n},r.and3=function(t,n,r){return t&&n&&r},r.and4=function(t,n,r,e){return t&&n&&r&&e},r.or2=function(t,n){return t||n},r.or3=function(t,n,r){return t||n||r},r.or4=function(t,n,r,e){return t||n||r||e},r.append2=function(t,n){return t.concat(n)},r.append3=function(t,n,r){return t.concat(n,r)},r.append4=function(t,n,r,e){return t.concat(n,r,e)},r.prepend2=function(t,n){return n.concat(t)},r.sum=function(t){for(var n=0,r=0;r<t.length;r+=1)n+=t[r];return n},r.product=function(t){for(var n=1,r=0,e=t.length;r<e;r+=1)n*=t[r];return n},r.and=function(t){for(var n=!0,r=0,e=t.length;r<e;r+=1)n=n&&t[r];return n},r.or=function(t){for(var n=!1,r=0,e=t.length;r<e;r+=1)n=n||t[r];return n},r.flatten=function(t){return e.apply([],t)},r.add=function(){for(var t=0,n=0,r=arguments.length;n<r;n+=1)t+=arguments[n];return t},r.multiply=function(){for(var t=1,n=0,r=arguments.length;n<r;n+=1)t*=arguments[n];return t},r.concat=function(){return e.apply([],arguments)},r.minus2=function(t,n){return t-n},r.divide2=function(t,n){return t/n},r.div2=function(t,n){return Math.floor(t/n)},r.mod2=function(t,n){return t%n},r.pow2=Math.pow,r.log2=function(t,n){return Math.log(t)/Math.log(n)},r.eq2=function(t,n){return t===n},r.neq2=function(t,n){return t!==n},r.gt2=function(t,n){return t>n},r.lt2=function(t,n){return t<n},r.gte2=function(t,n){return t>=n},r.lte2=function(t,n){return t<=n},r.plus=function(t){return function(n){return n+t}},r.minus=function(t){return function(n){return n-t}},r.times=function(t){return function(n){return n*t}},r.divide=function(t){return function(n){return n/t}},r.div=function(t){return function(n){return Math.floor(n/t)}},r.mod=function(t){return function(n){return n%t}},r.pow=function(t){return function(n){return Math.pow(n,t)}},r.log=function(t){return function(n){return Math.log(n)/Math.log(t)}},r.append=function(t){return function(n){return n.concat(t)}},r.prepend=function(t){return function(n){return t.concat(n)}},r.gt=function(t){return function(n){return n>t}},r.lt=function(t){return function(n){return n<t}},r.eq=function(t){return function(n){return n===t}},r.neq=function(t){return function(n){return n!==t}},r.gte=function(t){return function(n){return n>=t}},r.lte=function(t){return function(n){return n<=t}},t.exports=r},function(t,n){var r={equality:function(){var t=arguments;return function(n,r){for(var e=0,o=t.length;e<o;e+=1)if(n[t[e]]!==r[t[e]])return!1;return!0}},compare:function(t,n){return"function"==typeof t?(n=n||1,function(r,e){return n*(t(r)-t(e))}):(t=t||1,function(n,r){return t*(n-r)})},comparing:function(){var t=arguments;return function(n,r){for(var e=0,o=t.length;e<o;e+=2){var i=t[e+1]||1;if(n[t[e]]!==r[t[e]])return i*(n[t[e]]-r[t[e]])}return 0}}},e=function(t,n){return t===n};r.maximum=function(t){return Math.max.apply(Math,t)},r.minimum=function(t){return Math.min.apply(Math,t)},r.maximumBy=function(t,n){for(var r=1,e=n[0],o=n.length;r<o;r+=1)t(n[r],e)>0&&(e=n[r]);return e},r.minimumBy=function(t,n){for(var r=1,e=n[0],o=n.length;r<o;r+=1)t(n[r],e)<0&&(e=n[r]);return e},r.insertBy=function(t,n,r){for(var e=0,o=n.length;e<o;e+=1)if(t(n[e],r)>=0)return n.splice(e,0,r),n;return n.push(r),n},r.insert=function(t,n){return r.insertBy(r.compare(),t,n)},r.deleteBy=function(t,n,r){for(var e=0,o=n.length;e<o;e+=1)if(t(n[e],r))return n.splice(e,1),n;return n},r.delete=function(t,n){var r=t.indexOf(n);return r>=0&&t.splice(r,1),t},r.intersectBy=function(t,n,r){var e=[],o=n.length,i=r.length;if(o&&i)for(var u=0;u<o;u+=1)for(var a=n[u],s=0;s<i;s+=1)if(t(a,r[s])){e.push(a);break}return e},r.intersect=function(t,n){return r.intersectBy(e,t,n)},r.nubBy=function(t,n){for(var r=[],e=0,o=n.length;e<o;e+=1){for(var i=!0,u=0,a=r.length;u<a;u+=1)if(t(r[u],n[e])){i=!1;break}i&&r.push(n[e])}return r},r.nub=function(t){for(var n=[],r=0,e=t.length;r<e;r+=1)n.indexOf(t[r])<0&&n.push(t[r]);return n},r.groupBy=function(t,n){for(var r,e,o=[],i=0,u=n.length;i<u;i=r){for(e=[n[i]],r=i+1;r<u&&t(n[i],n[r]);r+=1)e.push(n[r]);o.push(e)}return o},r.group=function(t){return r.groupBy(e,t)},r.unionBy=function(t,n,e){return n.concat(n.reduce(r.deleteBy.bind(null,t),r.nubBy(t,e)))},r.union=function(t,n){return t.concat(t.reduce(r.delete,r.nub(n)))},r.differenceBy=function(t,n,e){return e.reduce(r.deleteBy.bind(null,t),n.slice())},r.difference=function(t,n){return n.reduce(r.delete,t.slice())},r.isSubsetOf=function(t,n,r){for(var e=n.slice(),o=0;o<t.length;o+=1){var i=t[o],u=e.indexOf(i);if(u<0)return!1;e.splice(u,1)}return!r||e.length>0},t.exports=r},function(t,n,r){var e=r(0),o={NONE:0,findMatch:function(t,n){return e.firstBy(function(t){return n.s===t.id.s&&n.r===t.id.r&&n.m===t.id.m},t)},findMatches:function(t,n){return t.filter(function(t){return!(null!=n.s&&t.id.s!==n.s||null!=n.r&&t.id.r!==n.r||null!=n.m&&t.id.m!==n.m)})},findMatchesRanged:function(t,n,r){return r=r||{},t.filter(function(t){return(null==n.s||t.id.s>=n.s)&&(null==n.r||t.id.r>=n.r)&&(null==n.m||t.id.m>=n.m)&&(null==r.s||t.id.s<=r.s)&&(null==r.r||t.id.r<=r.r)&&(null==r.m||t.id.m<=r.m)})},metadata:function(t){return t.reduce(function(t,n){return n.data&&t.push({id:n.id,data:n.data}),t},[])},partitionMatches:function(t,n,r,e){for(var o=[],i=0;i<t.length;i+=1){var u=t[i];null!=e&&u.id[r]!==e||(Array.isArray(o[u.id[n]-1])||(o[u.id[n]-1]=[]),o[u.id[n]-1].push(u))}return o},matchesForPlayer:function(t,n){return t.filter(function(t){return t.p.indexOf(n)>=0})},players:function(t){var n=t.reduce(function(t,n){return t.concat(n.p)},[]);return e.nub(n).filter(e.gt(o.NONE)).sort(e.compare())},rounds:function(t){return e.nub(t.map(e.get("id","r"))).sort(e.compare())},upcoming:function(t,n){return t.filter(function(t){return t.p.indexOf(n)>=0&&!t.m})},started:function(t){return t.some(function(t){return t.p.every(e.gt(o.NONE))&&t.m})},playable:function(t){return!t.p.some(e.eq(o.NONE))}};t.exports=o},function(t,n,r){var e,o,i=r(1),u=r(2),a=0,s=0;t.exports=function(t,n,r){var c=n&&r||0,f=n||[],l=(t=t||{}).node||e,p=void 0!==t.clockseq?t.clockseq:o;if(null==l||null==p){var h=i();null==l&&(l=e=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==p&&(p=o=16383&(h[6]<<8|h[7]))}var d=void 0!==t.msecs?t.msecs:(new Date).getTime(),m=void 0!==t.nsecs?t.nsecs:s+1,v=d-a+(m-s)/1e4;if(v<0&&void 0===t.clockseq&&(p=p+1&16383),(v<0||d>a)&&void 0===t.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=d,s=m,o=p;var y=(1e4*(268435455&(d+=122192928e5))+m)%4294967296;f[c++]=y>>>24&255,f[c++]=y>>>16&255,f[c++]=y>>>8&255,f[c++]=255&y;var g=d/4294967296*1e4&268435455;f[c++]=g>>>8&255,f[c++]=255&g,f[c++]=g>>>24&15|16,f[c++]=g>>>16&255,f[c++]=p>>>8|128,f[c++]=255&p;for(var M=0;M<6;++M)f[c+M]=l[M];return n||u(f)}},function(t,n,r){var e=r(1),o=r(2);t.exports=function(t,n,r){var i=n&&r||0;"string"==typeof t&&(n="binary"===t?new Array(16):null,t=null);var u=(t=t||{}).random||(t.rng||e)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,n)for(var a=0;a<16;++a)n[i+a]=u[a];return n||o(u)}}]);